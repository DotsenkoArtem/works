"use strict";function setPreloader(){preloader.style.transition="opacity ".concat(350,"ms"),preloader.classList.add("fade-out"),setTimeout(function(){preloader.remove()},350)}function modalsHandle(){var e=document.querySelectorAll(".js-modal-trigger");if(e)for(var t=function(){var r=e[s];r.addEventListener("click",function(){for(var e=r,t=document.getElementById(e.dataset.target),s=(t.classList.remove("closed"),t.classList.add("opened"),t.getElementsByClassName("js-modal-close")),n=0;n<s.length;n++)s[n].addEventListener("click",function(){var e;(e=t).classList.remove("opened"),e.classList.add("closed")})})},s=0;s<e.length;s++)t()}function setTimer(e,t,s){var r=1e3*(3600*e+60*t+s),e=parseInt(window.localStorage.getItem("timerTmpStartValue")),o=(e&&e!==r&&localStorage.clear(),window.localStorage.setItem("timerTmpStartValue",r),(new Date).getTime()+r),t=parseInt(localStorage.getItem("timerEnd")),a=(t&&(o=t),document.querySelector(".timer .js-timer-hour")),c=document.querySelector(".timer .js-timer-min"),i=document.querySelector(".timer .js-timer-sec"),l=document.querySelector(".js-timer-lamp");setTimeout(function e(){l.classList.toggle("turned-off");var t=(new Date).getTime(),t=(o=o<=t?t+r:o)-t,s=new Date(t).getUTCHours(),n=new Date(t).getUTCMinutes(),t=new Date(t).getUTCSeconds();a.innerHTML="".concat(u(s)),c.innerHTML="".concat(u(n)),i.innerHTML="".concat(u(t)),window.localStorage.setItem("timerEnd",o),setTimeout(e,1e3)},0);function u(e){return(e<10?"0":"").concat(e)}}window.addEventListener("load",function(){setPreloader(),modalsHandle(),setTimer(3,47,58);var e=document.querySelector('[name="userPhone"]');new Inputmask("+7 (\\999) 999-99-99").mask(e)});var sounds={success:"audio/success.mp3",error:"audio/error-1.mp3"},soundSuccess=new Sound(sounds.success),soundError=new Sound(sounds.error),alertSound=soundSuccess;function Sound(e){var t=document.createElement("audio");t.src=e,this.play=function(){t.play()}}for(var forms=document.forms,_loop2=function(){var a=forms[i];a.addEventListener("submit",function(e){var t,o;e=e,t="php/mail.php",setupLoader(a),e.preventDefault?e.preventDefault():e.returnValue=!1,(o=new XMLHttpRequest).open("POST",t,!0),o.onload=function(){var e=document.createElement("div"),t=document.createElement("div"),s=document.createElement("div");e.className="thanks",t.className="thanks__content",s.className="thanks__close",e.append(t,s),wrapper.append(e),s.onclick=function(){r()},removeLoader(a),200<=o.status&&o.status<400?"success"==(s=JSON.parse(this.response)).result?(t.innerHTML="<h3><span>Спасибо</span>Мы перезвоним Вам в ближайшее время!</h3>",e.classList.remove("thanks_error"),e.classList.add("thanks_success"),alertSound=soundSuccess):("limitExceeded"==s.result?(t.innerHTML="<h3><span>Ошибка.</span>Превышен максимальный размер прикрепляемых файлов (10мб).</h3>",e.classList.remove("thanks_success"),e.classList.add("thanks_error"),alertSound=soundError):(t.innerHTML="<h3><span>Ошибка</span>Сообщение не отправлено</h3>",alertSound=soundError,e.classList.remove("thanks_success"),e.classList.add("thanks_error")),console.log(s.status)):alert("Ошибка сервера. Номер: "+o.status),e.classList.add("active"),alertSound.play();for(var n=0;n<a.elements.length;n++)a.elements[n].disabled=!1;function r(){e.classList.remove("active"),e.style.animation="slideOutRightBottom .5s ease forwards",setTimeout(function(){e.remove()},500)}setTimeout(function(){r()},5e3)},o.onerror=function(){alert("Ошибка отправки запроса")},o.send(new FormData(e.target))})},i=0;i<forms.length;i++)_loop2();function setupLoader(e){var t=document.createElement("div");t.className="submit-loader",e.querySelector(".loader-container ").appendChild(t)}function removeLoader(e){e.querySelector(".submit-loader").remove()}