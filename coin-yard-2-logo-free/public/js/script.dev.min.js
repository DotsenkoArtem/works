"use strict";function setPreloader(){preloader.style.transition="opacity ".concat(350,"ms"),preloader.classList.add("fade-out"),setTimeout(function(){preloader.remove()},350)}function modalsHandle(){var e=document.querySelectorAll(".js-modal-trigger");if(e)for(var t=function(){var o=e[n];o.addEventListener("click",function(){for(var e=o,t=document.getElementById(e.dataset.target),n=(t.classList.remove("closed"),t.classList.add("opened"),document.body.classList.add("scroll-hidden"),t.getElementsByClassName("js-modal-close")),s=0;s<n.length;s++)n[s].addEventListener("click",function(){var e;(e=t).classList.remove("opened"),e.classList.add("closed"),document.body.classList.remove("scroll-hidden")})})},n=0;n<e.length;n++)t()}function setTimer(e,t,n){var r=1e3*(3600*e+60*t+n),e=parseInt(window.localStorage.getItem("timerTmpStartValueCoin2")),a=(e&&e!==r&&localStorage.clear(),window.localStorage.setItem("timerTmpStartValueCoin2",r),(new Date).getTime()+r),t=parseInt(localStorage.getItem("timerEndCoin2")),c=(t&&(a=t),document.querySelectorAll(".timer .js-timer-hour")),l=document.querySelectorAll(".timer .js-timer-min"),i=document.querySelectorAll(".timer .js-timer-sec"),d=document.querySelectorAll(".js-timer-lamp");setTimeout(function e(){d.forEach(function(e){e.classList.toggle("turned-off")});var t=(new Date).getTime(),t=(a=a<=t?t+r:a)-t,n=new Date(t).getUTCHours(),s=new Date(t).getUTCMinutes(),o=new Date(t).getUTCSeconds();c.forEach(function(e){e.innerHTML="".concat(u(n))}),l.forEach(function(e){e.innerHTML="".concat(u(s))}),i.forEach(function(e){e.innerHTML="".concat(u(o))}),window.localStorage.setItem("timerEndCoin2",a),setTimeout(e,1e3)},0);function u(e){return(e<10?"0":"").concat(e)}}window.addEventListener("load",function(){setPreloader(),modalsHandle(),setTimer(3,24,57);var e=document.querySelectorAll('[name="userPhone"]');new Inputmask("+7 (\\999) 999-99-99").mask(e)});var sounds={success:"audio/success.mp3",error:"audio/error-1.mp3"},soundSuccess=new Sound(sounds.success),soundError=new Sound(sounds.error),alertSound=soundSuccess;function Sound(e){var t=document.createElement("audio");t.src=e,this.play=function(){t.play()}}for(var forms=document.forms,_loop2=function(){var a=forms[i];a.addEventListener("submit",function(e){var t,r;e=e,t="php/mail.php",setupLoader(a),e.preventDefault?e.preventDefault():e.returnValue=!1,(r=new XMLHttpRequest).open("POST",t,!0),r.onload=function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div");e.className="thanks",t.className="thanks__content",n.className="thanks__close",e.append(t,n),wrapper.append(e),n.onclick=function(){o()},removeLoader(a),a.reset(),200<=r.status&&r.status<400?"success"==(n=JSON.parse(this.response)).result?(t.innerHTML="<h3><span>Спасибо</span>Мы перезвоним Вам в ближайшее время!</h3>",e.classList.remove("thanks_error"),e.classList.add("thanks_success"),alertSound=soundSuccess):("limitExceeded"==n.result?(t.innerHTML="<h3><span>Ошибка.</span>Превышен максимальный размер прикрепляемых файлов (10мб).</h3>",e.classList.remove("thanks_success"),e.classList.add("thanks_error"),alertSound=soundError):(t.innerHTML="<h3><span>Ошибка</span>Сообщение не отправлено</h3>",alertSound=soundError,e.classList.remove("thanks_success"),e.classList.add("thanks_error")),console.log(n.status)):alert("Ошибка сервера. Номер: "+r.status),e.classList.add("active"),alertSound.play();for(var s=0;s<a.elements.length;s++)a.elements[s].disabled=!1;function o(){e.classList.remove("active"),e.style.animation="slideOutRightBottom .5s ease forwards",setTimeout(function(){e.remove()},500)}setTimeout(function(){o()},5e3)},r.onerror=function(){alert("Ошибка отправки запроса")},r.send(new FormData(e.target))})},i=0;i<forms.length;i++)_loop2();function setupLoader(e){var t=document.createElement("div");t.className="submit-loader",e.querySelector(".loader-container ").appendChild(t)}function removeLoader(e){e.querySelector(".submit-loader").remove()}